[scenario]
#textdomain wesnoth-Eliador
id=eliador-glorienda
next_scenario=eliador-home
name= _ "Elves of Glorienda"
victory_when_enemies_defeated=no
map_data="{@campaigns/Eliador/maps/eliador-glorienda}"

turns=5

{FIRST_WATCH}
{SECOND_WATCH}
{DAWN}
{MORNING}
{AFTERNOON}
{DUSK}

music=elf-land.ogg

[side]
  side=1
  team_name=good
  controller=human
  type=Outlaw Queen
  description=Ardella
  canrecruit=1
[/side]

[side]
  side=2
  team_name=bad
  controller=ai
	no_leader=yes
[/side]

[event] 
  name=prestart 

  [objectives]
    side=1
    summary= _ "Visit villages until turns run out"
		[objective]
		  description= _ "Turns run out"
		  condition=win
   	[/objective]
  [/objectives]

  [terrain]
    x,y=20,11
    letter=r
  [/terrain]

  {SHOW_FAMILY}
  [recall]
    side=1
    type=Fire Dragon
  [/recall]
[/event]

[event]
  name=start

  [message]
    description=Zeke
    message= _ "Momma, the bad men didn't take papa here!"
  [/message]

  [message]
    description=Ardella
    message= _ "I know, son, but we can't get daddy back without some help."
  [/message]

  [message]
    description=Anna
    message= _ "Do you think the elves will help us?"
  [/message]

  [message]
    description=Ardella
    message= _ "Of course they will."
  [/message]

  [if]
    [have_unit]
      side=1
      type=Fire Dragon
    [/have_unit]
    [then]
      [message]
        description=Zeke
        message= _ "The dragon can visit the villages in the mountain."
      [/message]
      [message]
        description=Ardella
        message= _ "Good idea, son."
      [/message]
    [/then]
  [/if]
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=2,3
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 2 3}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=5,3
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 5 3}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=3,2
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 3 2}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=14,1
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 14 1}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=20,1
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 20 1}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=1,17
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 1 17}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=4,15
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 4 15}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=7,17
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 7 17}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=5,19
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 5 19}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=2,19
  [/filter]
  {RANDOM_CREATE_UNITS 1 (Elvish Archer,Elvish Fighter) 2 19}
[/event]

[event]
	name=moveto
	first_time_only=yes
  [filter]
    x,y=18,23
  [/filter]

  {VARIABLE reached_enchantress yes}

  {UNIT (Elvish Enchantress) Merith ( _ "Merith") 1 18 23}
  {UNIT (Elvish Enchantress) Ilalya  ( _ "Ilalya") 1 18 23}
  {UNIT (Elvish Enchantress) Larien  ( _ "Larien") 1 18 23}
  {UNIT (Elvish Enchantress) Fawien ( _ "Fawien") 1 18 23}

  [if]
    [have_unit]
      sdie=1
      type=Fire Dragon
    [/have_unit]
    [then]
      [message]
        type=Elvish Enchantress
        message= _ "Dragon of Anwar, you are not welcome here. I command you to join the sea creatures in their battle against the galleons. Leave now!"
      [/message]
  
      [kill]
        type=Fire Dragon
      [/kill]
      [move_unit_fake]
        type=Fire Dragon
        x=18,20
        y=23,13
      [/move_unit_fake]

      [message]
        type=Elvish Enchantress
        message= _ "Lady Ardella, it was unwise of you to bring a dragon to my land."
      [/message]
      [message]
        description=Ardella
        message= _ "Please, I only..."
      [/message]
    [/then]
  [/if]
  [message]
    type=Elvish Enchantress
    message= _ "Ardella, we have already notified the elves of Wesnoth about the coming invasion. Kinowyn and his forces are on their way to Eliador, but they are a few days behind the enemy galleons. I will help you and the others hold them off until they arrive."
  [/message]
[/event]

[event]
  name=time over
  {ELIADOR_VICTORY}
[/event]

[/scenario]
